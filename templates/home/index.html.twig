{% extends "base.html.twig" %}

{% block title %}{{ parent() }}: Accueil {% endblock %} {# parent para recuperar toddo de la pagina madre #}

{% block body %}

    {% if is_granted('IS_AUTHENTICATED') %}
        <div class="container" id="home-page">
            <div id="filter">
                <div>
                    <p>Filtrer les sorties</p>
                    <label for="site">Site :</label>
                    <select name="site" id="site">
                        <option value="">--Choisir un site--</option>
                        {% for i in sites %}
                            <option>{{ i.nom|upper }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label for="sortie">Le nom de la sortie contient:</label>
                    <input type="search" id="sortie" name="filter"/>
                </div>
                <div>
                    <label for="meeting-time">Entre</label>
                    <input type="datetime-local" id="meeting-time" name="meeting-time"/>
                    <label for="meeting-time"> et </label>
                    <input type="datetime-local" id="meeting-time" name="meeting-time"/>
                </div>
                <br>
                <div class="checkbox-group">
                    <input type="checkbox" id="sortie-orga" name="sortie-orga"/>
                    <label for="sortie-orga">Sorties dont je suis l'organisateur/trice</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="sortie-inscrit" name="sortie-inscrit"/>
                    <label for="sortie-inscrit">Sorties auxquelles je suis inscrit/e</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="sortie-non-inscrit" name="sortie-non-inscrit"/>
                    <label for="sortie-non-inscrit">Sorties auxquelles je ne suis pas inscrit/e</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="sortie-archive" name="sortie-archive"/>
                    <label for="sortie-archive">Sorties passées</label>
                </div>
            </div>
                <button type="submit">Rechercher</button>
            <br>
            <br>
            <div class="table-container">
                <table>
                    <thead>
                    <tr>
                        <th>Nom de la sortie</th>
                        <th>Date de la sortie</th>
                        <th>Clôture</th>
                        <th>Inscrits/places</th>
                        <th>Etat</th>
                        <th>Inscrit</th>
                        <th>Organisateur</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        {% for sortie in sorties %}
                            <th>{{ sortie.nom }}</th>
                            <th>{{ sortie.dateHeureDebut|date("d/m/Y H:i") }}</th>
                            <th>{{ sortie.dateLimiteInscription|date("d/m/Y") }}</th>
                            <th>/{{ sortie.nbInscriptionsMax }}</th>
                            <th>{{ sortie.etats.libelle }}</th>
                            <th></th>
                            <th>{{ sortie.organisateur.prenom|capitalize }} {{ sortie.organisateur.nom|upper|u.truncate(2,'.') }}</th>

                        {% endfor %}
                    </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <button type="submit"><a href="{{ path('sortie_creer') }}"> Créer une sortie</a></button>
        </div>

    {% else %}
        <div class="home-wrapper">
            <h1>Bienvenue</h1>

            <div>
                <img src="{{ asset('Images/sortir_home.png') }}" alt="sortir" width="500px">
            </div>
        </div>
    {% endif %}

{% endblock %}
